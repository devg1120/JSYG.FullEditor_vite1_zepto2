# JSYG.Path

Manipulation of svg path with [JSYG framework](https://github.com/YannickBochatay/JSYG)

### Installation

```shell
npm install jsyg-path
```

### Example with es6

```javascript
import Path from "jsyg-path"

let path = new Path();
path.moveTo(0,0).lineTo(30,50).lineTo(80,80);
path.appendTo('svg#mySVGContainer');

path = new Path('#myPath');
path.normalize(); //M,L,C,Z,z segments only
```

### API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

##### Table of Contents

*   [Path](#path)
    *   [Parameters](#parameters)
    *   [getLength](#getlength)
    *   [clone](#clone)
    *   [createSeg](#createseg)
        *   [Parameters](#parameters-1)
        *   [Examples](#examples)
    *   [cloneSeg](#cloneseg)
        *   [Parameters](#parameters-2)
    *   [addSeg](#addseg)
        *   [Examples](#examples-1)
    *   [clear](#clear)
    *   [getSeg](#getseg)
        *   [Parameters](#parameters-3)
    *   [getSegList](#getseglist)
    *   [setSegList](#setseglist)
        *   [Parameters](#parameters-4)
    *   [getLastSeg](#getlastseg)
    *   [appendSeg](#appendseg)
        *   [Parameters](#parameters-5)
        *   [Examples](#examples-2)
    *   [insertSeg](#insertseg)
        *   [Parameters](#parameters-6)
    *   [replaceSeg](#replaceseg)
        *   [Parameters](#parameters-7)
    *   [removeSeg](#removeseg)
        *   [Parameters](#parameters-8)
    *   [moveTo](#moveto)
        *   [Parameters](#parameters-9)
        *   [Examples](#examples-3)
    *   [lineTo](#lineto)
        *   [Parameters](#parameters-10)
        *   [Examples](#examples-4)
    *   [curveTo](#curveto)
        *   [Parameters](#parameters-11)
        *   [Examples](#examples-5)
    *   [close](#close)
    *   [getCurPt](#getcurpt)
        *   [Parameters](#parameters-12)
        *   [Examples](#examples-6)
    *   [applyPath](#applypath)
        *   [Parameters](#parameters-13)
    *   [rel2abs](#rel2abs)
    *   [hasArcs](#hasarcs)
    *   [hasRelSeg](#hasrelseg)
    *   [isNormalized](#isnormalized)
    *   [nbSegs](#nbsegs)
    *   [splitSeg](#splitseg)
        *   [Parameters](#parameters-14)
    *   [split](#split)
    *   [slice](#slice)
        *   [Parameters](#parameters-15)
    *   [reverse](#reverse)
    *   [seg2Polyline](#seg2polyline)
        *   [Parameters](#parameters-16)
    *   [toPolyline](#topolyline)
        *   [Parameters](#parameters-17)
    *   [simplify](#simplify)
        *   [Parameters](#parameters-18)
    *   [isClosed](#isclosed)
    *   [autoSmooth](#autosmooth)
        *   [Parameters](#parameters-19)
    *   [insertPointAtLength](#insertpointatlength)
        *   [Parameters](#parameters-20)
    *   [isPointInside](#ispointinside)
        *   [Parameters](#parameters-21)
    *   [normalize](#normalize)
    *   [getSegLength](#getseglength)
        *   [Parameters](#parameters-22)
    *   [getLengthAtSeg](#getlengthatseg)
        *   [Parameters](#parameters-23)
    *   [getSegAtLength](#getsegatlength)
        *   [Parameters](#parameters-24)
    *   [getPointAtLength](#getpointatlength)
        *   [Parameters](#parameters-25)
    *   [getRotateAtLength](#getrotateatlength)
        *   [Parameters](#parameters-26)
    *   [getTangentAtLength](#gettangentatlength)
        *   [Parameters](#parameters-27)
    *   [findSeg](#findseg)
        *   [Parameters](#parameters-28)
    *   [getNearestPoint](#getnearestpoint)
        *   [Parameters](#parameters-29)
    *   [getLengthAtPoint](#getlengthatpoint)
        *   [Parameters](#parameters-30)
    *   [arc2bez](#arc2bez)
        *   [Parameters](#parameters-31)
    *   [toCubicCurve](#tocubiccurve)
*   [rel2absSeg](#rel2absseg)
    *   [Parameters](#parameters-32)
*   [getSegDist](#getsegdist)
    *   [Parameters](#parameters-33)
*   [clonePath](#clonepath)
    *   [Parameters](#parameters-34)
*   [isShapeInside](#isshapeinside)
    *   [Parameters](#parameters-35)
*   [kappa](#kappa)
*   [getLayoutAttrs](#getlayoutattrs)
    *   [Parameters](#parameters-36)

#### Path

Chemins SVG

##### Parameters

*   `arg`  optionnel, argument JSYG faisant référence à un chemin svg (balise \<path>). Si non défini, un nouvel élément sera créé.

Returns **[Path](#path)**&#x20;

##### getLength

Renvoie la longueur totale du chemin

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

##### clone

Clone le chemin

Returns **[Path](#path)**&#x20;

##### createSeg

Crée un objet segment.
Le premier argument est la lettre correspondant au segment, les arguments suivants sont les mêmes que les méthodes natives décrites dans la <a href="http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathElement">norme SVG</a>

###### Parameters

*   `type`  {String} lettre correspondant au segment ('M','L','C','Z', etc)

###### Examples

```javascript
<pre>var path = new Path();
var seg = path.createSeg('M',0,0);
var seg2 = path.createSeg('L',50,50);
var seg3 = path.createSeg('C',50,50,30,10,10,30);
```

Returns **[SVGPathSeg](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)**&#x20;

##### cloneSeg

Clone un segment

###### Parameters

*   `seg`  segment ou indice du segment à cloner.

Returns **[SVGPathSeg](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)**&#x20;

##### addSeg

Ajoute un segment à la liste

###### Examples

```javascript
<pre>var path = new Path();
path.addSeg('M',0,0);
path.addSeg('C',50,50,10,30,30,10);

// éuivalent à
var seg = path.createSeg('M',0,0);
path.appendSeg(seg);

seg = path.createSeg('C',50,50,10,30,30,10);
path.appendSeg(seg);
```

Returns **[Path](#path)**&#x20;

##### clear

Réinitialise la liste des segments

Returns **[Path](#path)**&#x20;

##### getSeg

récupère un segment

###### Parameters

*   `i`  indice du segment

Returns **[SVGPathSeg](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)**&#x20;

##### getSegList

récupère la liste des segments sous forme de tableau

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)**&#x20;

##### setSegList

Trace le chemin à partir d'une liste de segments

###### Parameters

*   `segList`  tableau de segments

Returns **[Path](#path)**&#x20;

##### getLastSeg

récupère le dernier segment

Returns **[SVGPathSeg](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)**&#x20;

##### appendSeg

Ajoute un objet segment à la liste

###### Parameters

*   `seg`  objet segment

###### Examples

```javascript
<pre>var path = new Path();
var seg = path.createSeg('M',0,0);
path.appendSeg(seg);

//equivalent à
path.addSeg('M',0,0);
```

Returns **[Path](#path)**&#x20;

##### insertSeg

Insert un segment à l'indice donné

###### Parameters

*   `seg`  objet segment
*   `i`  indice ou insérer le segment

Returns **[Path](#path)**&#x20;

##### replaceSeg

Remplace un segment

###### Parameters

*   `i`  indice du segment à remplacer
*   `seg`  nouveau segment

Returns **[Path](#path)**&#x20;

##### removeSeg

Supprime un segment

###### Parameters

*   `i`  indice du segment à supprimer

Returns **[Path](#path)**&#x20;

##### moveTo

Ajoute un segment de déplacement

###### Parameters

*   `x`  abcisse
*   `y`  ordonnée

###### Examples

```javascript
<pre>var path = new Path();
path.moveTo(40,40);

//équivalent à
path.addSeg('M',40,40);

//ou encore à
var seg = path.createSeg('M',40,40);
path.appendSeg(seg);
```

Returns **[Path](#path)**&#x20;

##### lineTo

Ajout un segment de droite

###### Parameters

*   `x`  abcisse
*   `y`  ordonnée

###### Examples

```javascript
<pre>var path = new Path();
path.lineTo(40,40);

//équivalent à
path.addSeg('L',40,40);

//ou encore à
var seg = path.createSeg('L',40,40);
path.appendSeg(seg);
```

Returns **[Path](#path)**&#x20;

##### curveTo

Ajoute un segment de Bézier (cubique)

###### Parameters

*   `x1`  abcisse du 1er point de contrôle
*   `y1`  ordonnée du 1er point de contrôle
*   `x2`  abcisse du 2ème point de contrôle
*   `y2`  ordonnée du 2ème point de contrôle
*   `x`  abcisse du point d'arrivée
*   `y`  ordonnée du point d'arrivée

###### Examples

```javascript
<pre>var path = new Path();
path.curveTo(40,40,10,30,30,10);

//équivalent à
path.addSeg('C',40,40,10,30,30,10);

//ou encore à
var seg = path.createSeg('C',40,40,10,30,30,10);
path.appendSeg(seg);
```

Returns **[Path](#path)**&#x20;

##### close

Ferme le chemin (ajout d'un segment "Z")

Returns **[Path](#path)** <pre>var path = new Path();
path.curveTo(40,40,10,30,30,10);
path.close();

//équivalent à
path.addSeg('Z');

//ou encore à
var seg = path.createSeg('Z');
path.appendSeg(seg);

##### getCurPt

*   **See**: Path.prototype.rel2abs

Récupère le point courant.
Un segment donné ne renseigne que du point d'arrivée et non du point de départ dont on a souvent besoin.<br/> <strong>Attention</strong>, cela ne marche qu'avec des segments définis en absolu et non en relatif. Utilisez
si besoin la méthode rel2abs.

###### Parameters

*   `i`  indice du segment

###### Examples

```javascript
<pre>var path = new Path();
path.attr('d','M0,0 h50

path.getCurPt(0); // {x:20,y:20}
path.getCurPt(1); // {x:20,y:20}
path.getCurPt(2); // {x:20,y:20}
```

Returns **Vect**&#x20;

##### applyPath

Applique le tracé d'un autre chemin

###### Parameters

*   `path`  argument JSYG faisant référence à un chemin

Returns **[Path](#path)**&#x20;

##### rel2abs

Remplace les segments relatifs en segments absolus

Returns **[Path](#path)**&#x20;

##### hasArcs

Teste si le chemin contient des arcs ou non (segments a ou A)

Returns **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;

##### hasRelSeg

Teste si le chemin contient des segments relatifs ou non

##### isNormalized

Teste si le chemin est normalisé ou non. Normalisé signifie que tous ces segments sont absolus et uniquement de type M, L, C ou Z (z).

Returns **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;

##### nbSegs

Renvoie le nombre de segments

##### splitSeg

Scinde le segment en deux et renvoie un objet Path contenant les deux nouveaux segments.

###### Parameters

*   `ind`  indice du segment à diviser en 2.

Returns **[Path](#path)**&#x20;

##### split

Scinde chaque segment du chemin en 2.

Returns **[Path](#path)**&#x20;

##### slice

Extrait une portion du chemin et renvoie un objet Path contenant les segments de cette portion.

###### Parameters

*   `begin`  indice du premier segment. Si négatif, on part de la fin.
*   `end`  indice du dernier segment. Si négatif, on part de la fin. Si non précisé, dernier segment.

Returns **[Path](#path)**&#x20;

##### reverse

Inverse l'ordre des points. Pas de différence visuelle.

Returns **[Path](#path)**&#x20;

##### seg2Polyline

Transforme un segment quelconque en une série de segments de droites.
nécessite un segment normalisé (M,L,C,Z,z).

###### Parameters

*   `ind`  indice du segment
*   `nbsegs`  nombre de segments de droite pour approximer le segment initial (dans le cas d'un segment C).

Returns **[Path](#path)**&#x20;

##### toPolyline

Transforme le chemin en une série de segments de droite.
Le chemin doit être normalisé.

###### Parameters

*   `nbsegs`  nombre de segments pour approximer les courbes.

Returns **[Path](#path)**&#x20;

##### simplify

Simplification du chemin par l'algorithme de Douglas-Peucker

###### Parameters

*   `tolerance` &#x20;
*   `screen` &#x20;

Returns **[Path](#path)**&#x20;

##### isClosed

Teste si le chemin est fermé ou non

Returns **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;

##### autoSmooth

Lisse le chemin de manière automatique, sans avoir à définir de points de contrôles.

###### Parameters

*   `ind`  optionnel, indice du segment. Si précisé, le chemin ne sera lissé qu'autour de ce point.

Returns **[Path](#path)**&#x20;

##### insertPointAtLength

Insert un point à la distance précisée. Pas de changement visuel.

###### Parameters

*   `length` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

Returns **[Path](#path)**&#x20;

##### isPointInside

Teste si le point passé en paramètre est à l'intérieur du polygone défini par le chemin ou non.
Le chemin doit donc être fermé pour éventuellement renvoyer true.

###### Parameters

*   `pt`  objet Vect ou objet quelconque ayant les propriétés x et y.

Returns **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;

##### normalize

Normalise le chemin (segments M,L,C,Z,z uniquement).

Returns **[Path](#path)**&#x20;

##### getSegLength

Renvoie la longueur d'un segment

###### Parameters

*   `i`  indice du segment

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

##### getLengthAtSeg

Renvoie la longueur du chemin au niveau du segment précisé

###### Parameters

*   `i`  indice du segment

##### getSegAtLength

Renvoie l'indice du segment situé à la distance précisée

###### Parameters

*   `distance` &#x20;

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

##### getPointAtLength

Renvoie le point du chemin à la distance précisée

###### Parameters

*   `distance` &#x20;

Returns **Vect**&#x20;

##### getRotateAtLength

Renvoie l'angle du chemin à la distance précisée

###### Parameters

*   `distance` &#x20;

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

##### getTangentAtLength

Renvoie la tangente du chemin à la distance précisée

###### Parameters

*   `distance` &#x20;

Returns **Vect**&#x20;

##### findSeg

Trouve le segment le plus proche du point donné en paramètre

###### Parameters

*   `point`  objet avec les propriÃ©tÃ©s x et y.
*   `precision`  nombre de pixels maximal sï¿½parant le point du chemin

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** indice du segment trouvï¿½, ou -1

##### getNearestPoint

Trouve le point de la courbe le plus proche du point passé en paramètre

###### Parameters

*   `point`  objet avec les propriétés x et y

Returns **Vect**&#x20;

##### getLengthAtPoint

Trouve la longueur de la courbe au point le plus proche du point passé en paramètre

###### Parameters

*   `point` &#x20;

##### arc2bez

Convertit un arc en courbe de bézier

###### Parameters

*   `ind`  indice du segment arc ("A")
*   `bezierDegree`  optionnel, degré de la courbe de bézier à utiliser (3 par défaut)
*   `defaultFlatness`  optionnel, 0.5 (valeur par défaut) semble être la valeur adaptée.

Returns **[Path](#path)**&#x20;

##### toCubicCurve

Transforme une courbe quelconque en segments de type C

Returns **[Path](#path)**&#x20;

#### rel2absSeg

Remplace un segment relatif par son équivalent en absolu.

##### Parameters

*   `jPath` &#x20;
*   `ind` &#x20;

#### getSegDist

réduit le nombre de points du chemin en précisant une distance minimale entre 2 points.

##### Parameters

*   `p` &#x20;
*   `p1` &#x20;
*   `p2` &#x20;
*   `minDistance`  distance minimale en pixels entre 2 points en dessous de laquelle l'un des 2 sera supprimé.
*   `screen`  si true, cette distance est la distance en pixels visible à  l'écran (donc plus faible si le chemin est zoomé), sinon
    c'est la distance absolue entre 2 points du chemin.

Returns **[Path](#path)** Path.prototype.slim = function(minDistance,screen) {var i = 0,
ctm = screen ? this.parent().getMtx('screen') : new JSYG.Matrix(),
seg,next;while (i < this.nbSegs()-2) { //pas le dernier pointseg = new JSYG.Point(this.getSeg(i)).mtx(ctm);
next = new JSYG.Point(this.getSeg(i+1)).mtx(ctm);if (distance(seg,next) < minDistance) {if (i < this.nbSegs()-2) this.removeSeg(i+1);
else this.removeSeg(i);
}
else i++;
}return this;
};

#### clonePath

Convertit une forme svg en chemin

##### Parameters

*   `opt`  optionnel, objet pouvant avoir les propriétés suivantes :<ul>
    	<li>normalize : booleen, normalise ou non le chemin</li>
    <li>style : booleen, clone ou non les attributs de style de la forme au chemin</li>
    <li>transform : booleen, clone ou non l'attribut de trasnformation de la forme au chemin</li>
    </ul>

Returns **[Path](#path)**&#x20;

#### isShapeInside

Teste si la forme passée en paramètre est à l'intérieur de l'élément.
méthode de calcul un peu bourrin, gagnerait à être amélioriée.

##### Parameters

*   `shape`  argument JSYG faisant référence à une forme SVG

Returns **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;

#### kappa

Constante pour approximer les arcs

#### getLayoutAttrs

récupère les propriétés de mise en page

##### Parameters

*   `elmt` &#x20;
