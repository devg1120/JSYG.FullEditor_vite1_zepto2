# JSYG.ZoomAndPan

Zoom and Pan features with [JSYG framework](https://github.com/YannickBochatay/JSYG)

### Demo

<http://yannickbochatay.github.io/JSYG.ZoomAndPan/>

### Installation

```shell
npm install jsyg-zoomandpan
```

### Example with webpack/babel

```javascript
import ZoomAndPan from "jsyg-zoomandpan"

let zap = new ZoomAndPan("#mySVGContainer")
zap.enable()
zap.mouseWheelZoom.enable()
zap.resizable.enable()
zap.mousePan.enable()
```

### API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

##### Table of Contents

*   [plugins](#plugins)
*   [ZoomAndPan](#zoomandpan)
    *   [Parameters](#parameters)
    *   [Examples](#examples)
    *   [mouseWheelZoom](#mousewheelzoom)
    *   [marqueeZoom](#marqueezoom)
    *   [resizable](#resizable)
    *   [mousePan](#mousepan)
    *   [cookie](#cookie)
    *   [innerFrame](#innerframe)
    *   [innerFrame](#innerframe-1)
    *   [outerFrame](#outerframe)
    *   [outerFrame](#outerframe-1)
    *   [set](#set)
        *   [Parameters](#parameters-1)
    *   [setNode](#setnode)
        *   [Parameters](#parameters-2)
    *   [enabled](#enabled)
    *   [overflow](#overflow)
    *   [animate](#animate)
    *   [animateOptions](#animateoptions)
    *   [scaleMin](#scalemin)
    *   [scaleMax](#scalemax)
    *   [minLeft](#minleft)
    *   [maxRight](#maxright)
    *   [minTop](#mintop)
    *   [maxBottom](#maxbottom)
    *   [bounds](#bounds)
    *   [minWidth](#minwidth)
    *   [minHeight](#minheight)
    *   [maxWidth](#maxwidth)
    *   [maxHeight](#maxheight)
    *   [onscale](#onscale)
    *   [ontranslate](#ontranslate)
    *   [onresize](#onresize)
    *   [onchange](#onchange)
    *   [onanimate](#onanimate)
    *   [\_getBounds](#_getbounds)
        *   [Parameters](#parameters-3)
    *   [enable](#enable)
        *   [Parameters](#parameters-4)
    *   [disable](#disable)
    *   [\_getAdd](#_getadd)
    *   [size](#size)
        *   [Parameters](#parameters-5)
    *   [transform](#transform)
        *   [Parameters](#parameters-6)
    *   [scale](#scale)
        *   [Parameters](#parameters-7)
    *   [translate](#translate)
        *   [Parameters](#parameters-8)
        *   [Examples](#examples-1)
    *   [screenTranslate](#screentranslate)
        *   [Parameters](#parameters-9)
        *   [Examples](#examples-2)
    *   [scaleTo](#scaleto)
        *   [Parameters](#parameters-10)
    *   [fitToCanvas](#fittocanvas)
    *   [fitToWidth](#fittowidth)
    *   [fitToHeight](#fittoheight)
    *   [translateTo](#translateto)
        *   [Parameters](#parameters-11)
    *   [center](#center)
        *   [Parameters](#parameters-12)
*   [Cookie](#cookie-1)
    *   [Parameters](#parameters-13)
    *   [expires](#expires)
    *   [read](#read)
    *   [write](#write)
    *   [remove](#remove)
    *   [enable](#enable-1)
    *   [disable](#disable-1)
*   [MouseWheelZoom](#mousewheelzoom-1)
    *   [Parameters](#parameters-14)
    *   [key](#key)
    *   [step](#step)
    *   [onstart](#onstart)
    *   [onend](#onend)
    *   [enabled](#enabled-1)
    *   [wheel](#wheel)
        *   [Parameters](#parameters-15)
    *   [enable](#enable-2)
        *   [Parameters](#parameters-16)
    *   [disable](#disable-2)
*   [MarqueeZoom](#marqueezoom-1)
    *   [Parameters](#parameters-17)
    *   [container](#container)
    *   [event](#event)
    *   [eventWhich](#eventwhich)
    *   [onstart](#onstart-1)
    *   [ondrag](#ondrag)
    *   [onend](#onend-1)
    *   [className](#classname)
    *   [enabled](#enabled-2)
    *   [start](#start)
        *   [Parameters](#parameters-18)
    *   [enable](#enable-3)
        *   [Parameters](#parameters-19)
    *   [disable](#disable-3)
*   [MousePan](#mousepan-1)
    *   [Parameters](#parameters-20)
    *   [event](#event-1)
    *   [eventWhich](#eventwhich-1)
    *   [className](#classname-1)
    *   [classDrag](#classdrag)
    *   [horizontal](#horizontal)
    *   [vertical](#vertical)
    *   [onstart](#onstart-2)
    *   [ondrag](#ondrag-1)
    *   [onend](#onend-2)
    *   [enabled](#enabled-3)
    *   [\_canMove](#_canmove)
    *   [start](#start-1)
        *   [Parameters](#parameters-21)
    *   [enable](#enable-4)
        *   [Parameters](#parameters-22)
    *   [disable](#disable-4)
*   [ZapResizable](#zapresizable)
    *   [Parameters](#parameters-23)
    *   [event](#event-2)
    *   [field](#field)
    *   [cursor](#cursor)
    *   [horizontal](#horizontal-1)
    *   [vertical](#vertical-1)
    *   [keepRatio](#keepratio)
    *   [keepViewBox](#keepviewbox)
    *   [onstart](#onstart-3)
    *   [onresize](#onresize-1)
    *   [onend](#onend-3)
    *   [enabled](#enabled-4)
    *   [start](#start-2)
        *   [Parameters](#parameters-24)
    *   [enable](#enable-5)
        *   [Parameters](#parameters-25)
    *   [disable](#disable-5)

#### plugins

liste des plugins associés au zoomAndPan

#### ZoomAndPan

<strong>nécessite le module ZoomAndPan</strong><br/><br/>
Gestion du zoom et panoramique d'un canvas SVG.<br/><br/>

##### Parameters

*   `arg`  argument JSYG référence au canvas SVG
*   `opt`  optionnel, objet définissant les propriétés. S'il est précisé, le module sera implicitement activé. Si les modules ("mouseWheelZoom",
    "marqueeZoom","resizable","mousePan") sont définis à true, il seront activés avec les options par défaut.

##### Examples

```javascript
<pre>var zap = new ZoomAndPan("svg");
zap.overflow = "auto";
zap.enable();
zap.mouseWheelZoom.key = "ctrl";
zap.mouseWheelZoom.enable();
zap.mousePan.enable();

//Equivalent à
new ZoomAndPan("svg",{
   overflow:"auto",
   mouseWheelZoom:{key:"ctrl"},
   mousePan:true
});
</pre>
```

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### mouseWheelZoom

Gestion du zoom par la molette de la souris

##### marqueeZoom

Gestion du zoom par tracé d'un cadre

##### resizable

Gestion de la taille du canvas SVG

##### mousePan

déplacement dans le canvas avec la souris

##### cookie

gestion du cookie pour mémoriser zoom et position

##### innerFrame

Element g permettant de gérer le zoom

##### innerFrame

conteneur (g) qui gère le zoom et la position du contenu

##### outerFrame

Element div permettant de gérer les ascenceurs (si overflow!="hidden")

##### outerFrame

conteneur (div) auquel est attaché le canvas SVG (si overflow!='hidden').
Cela permet de gérer des ascenceurs, qui n'existent pas en SVG.

##### set

définitions des options

###### Parameters

*   `options` &#x20;

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### setNode

définition du canvas SVG

###### Parameters

*   `arg`  argument JSYG

##### enabled

module actif ou non

##### overflow

Gestion du contenu dépassant du canvas de visualisation
'hidden' ou 'auto' ou 'scroll' (scroll-x,scroll-y)

##### animate

effet d'animation ou non pour le zoom et le déplacement
Attention, cela nécessite une bonne carte graphique

##### animateOptions

Options supplémentaires d'animation

##### scaleMin

Echelle minimale. Si = "canvas", l'échelle minimale correspond à la taille du canvas (en tenant compte des bornes définies
par la propriétés bounds ou les propriétés minLeft,maxRight,minTop,maxBottom).

##### scaleMax

Echelle maximale. Si = "canvas", l'échelle minimale correspond à la taille du canvas (en tenant compte des bornes définies
par la propriétés bounds ou les propriétés minLeft,maxRight,minTop,maxBottom).

##### minLeft

Abcisse minimale au delà de laquelle on ne peut plus naviguer

##### maxRight

Abcisse maximale au delà de laquelle on ne peut plus naviguer

##### minTop

Ordonnée minimale au delà de laquelle on ne peut plus naviguer

##### maxBottom

Ordonnée maximale au delà de laquelle on ne peut plus naviguer

##### bounds

permet de définir les abcisses et ordonnées extrêmes de navigation à x pixels du bord du contenu
(si la valeur est positive, on peut aller au delà du contenu).

##### minWidth

largeur minimale du canvas

##### minHeight

hauteur minimale du canvas

##### maxWidth

largeur maximale du canvas

##### maxHeight

hauteur maximale du canvas

##### onscale

Fonction(s) à exécuter à tout changment de zoom

##### ontranslate

Fonction(s) à exécuter à tout changment de position

##### onresize

Fonction(s) à exécuter à tout changment de taille du canvas

##### onchange

Fonction(s) à exécuter à tout changement

##### onanimate

Fonction(s) à exécuter pendant les animations

##### \_getBounds

Renvoie la taille du contenu de la navigation (contenu + bornes définies)

###### Parameters

*   `ctm`  optionnel, si true renvoie la taille en tenant compte de la matrice de transformation

##### enable

Active la gestion du zoom et panoramique.
Cette méthode insère un conteneur (propriété innerFrame) à la racine du canvas
et tout le contenu y est déplacé. Les éléments créés ensuite doivent donc etre
attachés à "innerFrame" et non à l'élément svg lui-meme (sauf si cela est voulu),
sinon ils ne suivront pas le zoom et panoramique avec le reste.
Si la propriété "overflow" est différente de "hidden", un conteneur (propriété
outerFrame) div est inséré et le canvas y est attaché afin de gérer le scroll
(les ascenseurs n'existent pas en SVG).

###### Parameters

*   `opt`  optionnel, objet définissant les options

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### disable

Désactivation de la gestion du zoom et panoramique

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### \_getAdd

Ajustement nécessaire du aux ascenceurs

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

##### size

Renvoie (appel sans argument) ou définit la taille du canvas

###### Parameters

*   `width`  optionnel, largeur du canvas. Si non défini, largeur proportionnelle à la hauteur définie
*   `height`  optionnel, hauteur du canvas. Si non défini, hauteur proportionnelle à la largeur définie
*   `keepViewBox`  booléen optionnel, si true garde le cadrage après redimensionnement.

Returns **[ZoomAndPan](#zoomandpan)** si appelé avec arguments, objet avec les propriétés width et height sinon.

##### transform

Applique une transformation au contenu du canvas

###### Parameters

*   `mtx`  objet JSYG.Matrix, matrice de transformation à appliquer
*   `callback`  fonction à exécuter à la fin (équivalent à l'évènement onchange)

##### scale

Renvoie ou applique l'échelle (si la méthode est appelée avec des arguments).

###### Parameters

*   `scale`  optionnel, si défini facteur de l'échelle (multiplie l'échelle courante, ne la remplace pas).
*   `originX`  optionnel, abcisse du point fixe (centre du canvas par défaut)
*   `originY`  optionnel, ordonnee du point fixe (centre du canvas par défaut)
*   `callback`  optionnel, fonction à exécuter une fois le zoom effectué (équivalent à l'évènement onscale)

##### translate

Renvoie ou applique le déplacement dans le canvas (unités initiales).

###### Parameters

*   `x`  déplacement horizontal
*   `y`  déplacement vertical
*   `callback`  , optionnel, fonction à exécuter une fois la translation effectuée (équivalent à l'évènement ontranslate)

###### Examples

```javascript
Si l'échelle est de 2, un déplacement horizontal de 1 déplacera visuellement le contenu de 2 pixels.
```

##### screenTranslate

déplacement dans le canvas (en pixels écran).

###### Parameters

*   `x`  déplacement horizontal
*   `y`  déplacement vertical
*   `callback`  optionnel, fonction à exécuter une fois la translation effectuée (équivalent à l'évènement ontranslate)

###### Examples

```javascript
Si l'échelle est de 2, un déplacement horizontal de 1 déplacera visuellement le contenu de 1 pixel.
```

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### scaleTo

Fixe la valeur de l'échelle

###### Parameters

*   `scale`  valeur de l'échelle
*   `originX`  optionnel, abcisse du point fixe (centre par défaut)
*   `originY`  optionnel, ordonnée du point fixe (centre par défaut)
*   `callback`  optionnel, fonction à exécuter une fois le zoom effectué (équivalent à l'évènement onscale)

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### fitToCanvas

Adapte le contenu à la taille du canvas

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### fitToWidth

Adapte le contenu à la largeur du canvas

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### fitToHeight

Adapte le contenu à la hauteur du canvas

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### translateTo

Fixe les valeurs de la translation (point supérieur gauche)

###### Parameters

*   `x`  abcisse
*   `y`  ordoonée
*   `callback`  optionnel, fonction à exécuter une fois la translation effectuée (équivalent à l'évènement ontranslate)

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

##### center

définit ou fixe la position du centre du canvas (si appelé avec arguments)

###### Parameters

*   `x`  abcisse
*   `y`  ordoonée
*   `callback`  optionnel, fonction à exécuter une fois la translation effectuée (équivalent à l'évènement ontranslate)

Returns **[ZoomAndPan](#zoomandpan)**&#x20;

#### Cookie

Gestion du cookie pour conservation de l'état

##### Parameters

*   `zoomAndPanObject` &#x20;

##### expires

expiration du cookie:  nombre de jours à partir de la date courante, ou null pour session courante.

##### read

Lit le cookie et positionne le canvas en conséquence

Returns **[Cookie](#cookie)**&#x20;

##### write

Ecrit un cookie pour mémoriser l'état du canvas SVG

Returns **[Cookie](#cookie)**&#x20;

##### remove

Supprime le cookie

Returns **[Cookie](#cookie)**&#x20;

##### enable

Active le cookie

Returns **[Cookie](#cookie)**&#x20;

##### disable

Désactive le cookie

Returns **[Cookie](#cookie)**&#x20;

#### MouseWheelZoom

Gestion du zoom par molette de la souris (+ une touche spéciale éventuellement).
Attention, google chrome ne permet pas d'annuler l'action par défaut pour ctrl+molette

##### Parameters

*   `zoomAndPanObject` &#x20;

##### key

Touche spéciale à maintenir enfoncée pour rendre le zoom actif ("ctrl","shift","alt")

##### step

Pas du zoom à chaque coup de molette

##### onstart

Fonction(s) à exécuter avant de zoomer

##### onend

Fonction(s) à exécuter après avoir zoomé

##### enabled

Module actif ou non

##### wheel

Fonction exécutée sur évènement mouseWheel

###### Parameters

*   `e` &#x20;

##### enable

Activation du module

###### Parameters

*   `opt`  optionnel, objet définissant les options.

Returns **[MouseWheelZoom](#mousewheelzoom)**&#x20;

##### disable

Désactivation du module

Returns **[MouseWheelZoom](#mousewheelzoom)**&#x20;

#### MarqueeZoom

définition du zoom par tracé d'un rectangle

##### Parameters

*   `zoomAndPanObject` &#x20;

##### container

Element SVG rect dessinant le tracé

##### event

Evenement déclenchant le tracé

##### eventWhich

Restriction à un bouton de la souris (1 bouton gauche, 2 bouton du milieu, 3 bouton droit)

##### onstart

Fonction(s) à exécuter au début du tracé

##### ondrag

Fonction(s) à exécuter pendant le tracé

##### onend

Fonction(s) à exécuter à la fin du tracé

##### className

Classe à appliquer au conteneur

##### enabled

Module actif ou non

##### start

Fonction exécutée sur l'évènement event

###### Parameters

*   `e` &#x20;

##### enable

Activation du module

###### Parameters

*   `opt`  optionnel, objet définissant les options

Returns **[MarqueeZoom](#marqueezoom)**&#x20;

##### disable

Désactivation du module

Returns **[MarqueeZoom](#marqueezoom)**&#x20;

#### MousePan

Gestion du panoramique (navigation façon googlemaps)

##### Parameters

*   `zoomAndPanObject` &#x20;

##### event

Evènement déclenchant le panoramique

##### eventWhich

Restriction à un bouton de la souris (1 bouton gauche, 2 bouton du milieu, 3 bouton droit)

##### className

Classe à appliquer quand le module est actif.

##### classDrag

Classe à appliquer pendant le cliquer/glisser.

##### horizontal

déplacement horizontal

##### vertical

déplacement vertical

##### onstart

Fonction(s) à exécuter au début du cliquer/glisser

##### ondrag

Fonction(s) à exécuter pendant le cliquer/glisser

##### onend

Fonction(s) à exécuter à la fin du cliquer/glisser

##### enabled

Module actif ou non

##### \_canMove

Teste si un déplacement est possible ou non (selon l'échelle)

##### start

Fonction exécutée sur l'évènement défini

###### Parameters

*   `e`  Event

##### enable

Activation du module

###### Parameters

*   `opt`  optionnel, objet définissant les options

Returns **[MousePan](#mousepan)**&#x20;

##### disable

Désactivation du module

Returns **[MousePan](#mousepan)**&#x20;

#### ZapResizable

Redimensionnement du canvas à la souris

##### Parameters

*   `zoomAndPanObject` &#x20;

##### event

Evènement déclenchant le redimensionnement

##### field

Elément déclenchant le redimensionnement. La valeur "defaut" insère une image dans le coin inférieur droit.

##### cursor

Curseur à appliquer à l'élément pendant le cliquer/glisser

##### horizontal

Redimensionnement horizontal

##### vertical

Redimensionnement vertical

##### keepRatio

Maintien des proportions

##### keepViewBox

Maintien de la partie visible

##### onstart

Fonction(s) à exécuter au début du cliquer/glisser

##### onresize

Fonction(s) à exécuter pendant cliquer/glisser

##### onend

Fonction(s) à exécuter à la fin du cliquer/glisser

##### enabled

Module actif ou non

##### start

Fonction exécutée sur l'évènement défini

###### Parameters

*   `e` &#x20;

##### enable

Activation du module

###### Parameters

*   `opt`  optionnel, objet définissant les options

Returns **[ZapResizable](#zapresizable)**&#x20;

##### disable

Désactivation du module
